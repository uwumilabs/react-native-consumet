pre-commit:
  parallel: false
  follow: true
  commands:
    lint:
      glob: '*.{js,ts,jsx,tsx,json,md,html,css}'
      run: |
        echo "🔍 Running ESLint..."
        npx eslint --fix . {staged_files}
        yarn lint --fix .
        echo "✅ ESLint completed"
      stage_fixed: true  

    format:
      glob: '*.{js,ts,jsx,tsx,json}'
      run: |
        echo "🎨 Running Prettier..."
        npx prettier --write {staged_files}
        yarn prettier
        echo "✅ Prettier formatting completed"
      stage_fixed: true 

    types:
      glob: '*.{js,ts,jsx,tsx}'
      run: |
        echo "🛠 Running TypeScript check..."
        npx tsc --noEmit
        yarn typecheck
        echo "✅ TypeScript check completed"

    build-dist:
      run: |
        echo "📦 Building dist folder..."
        yarn build
        if [ -d "dist" ]; then
          echo "✅ Dist folder exists"
          git add dist
        else
          echo "❌ Dist folder not found after build!"
          exit 1
        fi

commit-msg:
  parallel: true
  commands:
    commitlint:
      run: npx --no-install commitlint --edit "$1"

debug: true
