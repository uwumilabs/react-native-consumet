// Auto-generated from test.js
export const testCodeString =
  "\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createYFlix = createYFlix;\nfunction createYFlix(ctx, customBaseURL) {\n    const { load, extractors, enums, axios, createCustomBaseUrl, PolyURL } = ctx;\n    const { MegaUp } = extractors;\n    const { TvType: TvTypeEnum, StreamingServers: StreamingServersEnum } = enums;\n    const apiBase = 'https://enc-dec.app/api';\n    const baseUrl = createCustomBaseUrl('https://yflix.to', customBaseURL);\n    const config = {\n        name: 'YFlix',\n        languages: 'all',\n        classPath: 'MOVIES.YFlix',\n        logo: `${baseUrl}/assets/uploads/2f505f3de3c99889c1a72557f3e3714fc0c457b0.png`,\n        baseUrl,\n        isNSFW: false,\n        isWorking: true,\n    };\n    const supportedTypes = new Set([TvTypeEnum.MOVIE, TvTypeEnum.TVSERIES]);\n    const GenerateToken = (n) => __awaiter(this, void 0, void 0, function* () {\n        try {\n            const res = yield axios.get(`${apiBase}/enc-movies-flix?text=${encodeURIComponent(n)}`);\n            return res.data.result;\n        }\n        catch (error) {\n            throw new Error(error.message);\n        }\n    });\n    const DecodeIframeData = (n) => __awaiter(this, void 0, void 0, function* () {\n        try {\n            const res = yield axios.post(`${apiBase}/dec-movies-flix`, { text: n });\n            return res.data.result;\n        }\n        catch (error) {\n            throw new Error(error.message);\n        }\n    });\n    /**\n     *\n     * @param query search query string\n     * @param page page number (default 1) (optional)\n     */\n    const search = (query_1, ...args_1) => __awaiter(this, [query_1, ...args_1], void 0, function* (query, page = 1) {\n        const searchResult = {\n            currentPage: page,\n            hasNextPage: false,\n            results: [],\n        };\n        try {\n            const { data } = yield axios.get(`${baseUrl}/browser?keyword=${query.replace(/[\\W_]+/g, '+')}&page=${page}`);\n            const $ = load(data);\n            const navSelector = 'nav.navigation > ul.pagination';\n            searchResult.hasNextPage =\n                $(navSelector).length > 0 ? !$(navSelector).children().last().hasClass('active') : false;\n            $('.film-section > div.item').each((i, el) => {\n                var _a;\n                const releaseDate = $(el).find('div.metadata > span:nth-child(2)').text();\n                searchResult.results.push({\n                    id: (_a = $(el).find('div.inner > a').attr('href')) === null || _a === void 0 ? void 0 : _a.split('/watch/')[1],\n                    title: $(el).find('div.info > a').text().trim(),\n                    url: `${baseUrl}${$(el).find('div.inner > a').attr('href')}`,\n                    image: $(el).find('img').attr('data-src') || $(el).find('img').attr('src'),\n                    releaseDate: isNaN(parseInt(releaseDate)) ? undefined : releaseDate,\n                    seasons: releaseDate.includes('SS') ? parseInt(releaseDate.split('SS')[1]) : undefined,\n                    type: $(el).find('div.metadata > span:nth-child(1)').text() === 'Movie' ? TvTypeEnum.MOVIE : TvTypeEnum.TVSERIES,\n                });\n            });\n            return searchResult;\n        }\n        catch (err) {\n            throw new Error(err.message);\n        }\n    });\n    /**\n     *\n     * @param mediaId media link or id\n     */\n    const fetchMediaInfo = (mediaId) => __awaiter(this, void 0, void 0, function* () {\n        var _a;\n        if (!mediaId.startsWith(baseUrl)) {\n            mediaId = `${baseUrl}/watch/${mediaId}`;\n        }\n        const movieInfo = {\n            id: mediaId.split('to/').pop(),\n            title: '',\n            url: mediaId,\n        };\n        try {\n            const { data } = yield axios.get(mediaId);\n            const $ = load(data);\n            const recommendationsArray = [];\n            $('section.movie-related > div.film-section > div.item').each((i, el) => {\n                var _a;\n                const releaseDate = $(el).find('div.metadata > span:nth-child(2)').text();\n                recommendationsArray.push({\n                    id: (_a = $(el).find('div.inner > a').attr('href')) === null || _a === void 0 ? void 0 : _a.split('/watch/')[1],\n                    title: $(el).find('div.info > a').text().trim(),\n                    image: $(el).find('img').attr('data-src') || $(el).find('img').attr('src'),\n                    releaseDate: isNaN(parseInt(releaseDate)) ? undefined : releaseDate,\n                    seasons: releaseDate.includes('SS') ? parseInt(releaseDate.split('SS')[1]) : undefined,\n                    type: $(el).find('div.metadata > span:nth-child(1)').text() === 'Movie' ? TvTypeEnum.MOVIE : TvTypeEnum.TVSERIES,\n                });\n            });\n            const uid = $('#movie-rating').attr('data-id');\n            movieInfo.cover = (_a = $('div.detail-bg').attr('style')) === null || _a === void 0 ? void 0 : _a.slice(22).replace(')', '').replace(';', '');\n            movieInfo.title = $('h1.title').text();\n            movieInfo.image = $('.poster  img').attr('src');\n            movieInfo.description = $('.description').text().trim();\n            movieInfo.releaseDate = $('ul.mics > li:contains(Released:)').text().replace('Released:', '').trim();\n            movieInfo.genres = $('ul.mics > li:contains(Genres:) a')\n                .map((i, el) => $(el).text().split('&'))\n                .get()\n                .map((v) => v.trim());\n            movieInfo.casts = $('ul.mics > li:contains(Casts:) a')\n                .map((i, el) => $(el).text())\n                .get();\n            movieInfo.country = $('ul.mics > li:contains(Country:) a').text().trim();\n            movieInfo.rating = parseFloat($('.metadata > span.IMDb').text().replace('IMDb', '').trim());\n            movieInfo.recommendations = recommendationsArray;\n            const episodesAjax = yield axios.get(`${baseUrl}/ajax/episodes/list?id=${uid}&_=${yield GenerateToken(uid)}`, {\n                headers: {\n                    'X-Requested-With': 'XMLHttpRequest',\n                    'Referer': `${baseUrl}/watch/${mediaId}`,\n                },\n            });\n            const $$ = load(episodesAjax.data.result);\n            movieInfo.episodes = [];\n            $$('.episodes').each((_, el) => {\n                const season = parseInt($$(el).attr('data-season'), 10);\n                $$(el)\n                    .find('li a')\n                    .each((_, link) => {\n                    var _a, _b, _c, _d;\n                    const $link = $(link);\n                    const id = ((_a = $link.attr('eid')) === null || _a === void 0 ? void 0 : _a.trim()) || '';\n                    const url = baseUrl + ((_b = $link.attr('href')) === null || _b === void 0 ? void 0 : _b.trim()) || '';\n                    const number = parseInt($link.attr('num') || '', 10);\n                    const releaseDate = ((_c = $link.attr('title')) === null || _c === void 0 ? void 0 : _c.trim()) || '';\n                    const title = $link.find('span:last-child').text().trim();\n                    (_d = movieInfo.episodes) === null || _d === void 0 ? void 0 : _d.push({\n                        id,\n                        title,\n                        url,\n                        number,\n                        season,\n                        releaseDate,\n                    });\n                });\n            });\n            return movieInfo;\n        }\n        catch (err) {\n            console.log(err);\n            throw new Error(err.message);\n        }\n    });\n    /**\n     *\n     * @param episodeId episode id\n     * @param mediaId media id\n     * @param server server type (default `MegaUp`) (optional)\n     */\n    const fetchEpisodeSources = (episodeId_1, mediaId_1, ...args_1) => __awaiter(this, [episodeId_1, mediaId_1, ...args_1], void 0, function* (episodeId, mediaId, server = StreamingServersEnum.MegaUp) {\n        var _a;\n        if (episodeId.startsWith('http')) {\n            const serverUrl = new PolyURL(episodeId);\n            switch (server) {\n                case StreamingServersEnum.MegaUp:\n                    return Object.assign({ headers: { Referer: serverUrl.href } }, (yield MegaUp().extract(serverUrl)));\n                default:\n                    return Object.assign({ headers: { Referer: serverUrl.href } }, (yield MegaUp().extract(serverUrl)));\n            }\n        }\n        try {\n            const servers = yield fetchEpisodeServers(episodeId, mediaId);\n            const i = servers.findIndex((s) => s.name.toLowerCase().includes(server));\n            if (i === -1) {\n                throw new Error(`Server ${server} not found`);\n            }\n            const serverUrl = new URL((_a = servers[i]) === null || _a === void 0 ? void 0 : _a.url);\n            const sources = yield fetchEpisodeSources(serverUrl.href, mediaId, server);\n            return sources;\n        }\n        catch (err) {\n            console.log(err, 'err');\n            throw new Error(err.message);\n        }\n    });\n    /**\n     *\n     * @param episodeId takes episode link or movie id\n     * @param mediaId takes movie link or id (found on movie info object)\n     */\n    const fetchEpisodeServers = (episodeId, mediaId) => __awaiter(this, void 0, void 0, function* () {\n        try {\n            const { data } = yield axios.get(`${baseUrl}/ajax/links/list?eid=${episodeId}&_=${yield GenerateToken(episodeId)}`);\n            const $ = load(data.result);\n            const servers = [];\n            const serverItems = $('ul > li.server');\n            yield Promise.all(serverItems.map((i, server) => __awaiter(this, void 0, void 0, function* () {\n                const id = $(server).attr('data-lid');\n                const { data } = yield axios.get(`${baseUrl}/ajax/links/view?id=${id}&_=${yield GenerateToken(id)}`);\n                const decodedIframeData = yield DecodeIframeData(data.result);\n                servers.push({\n                    name: `MegaUp ${$(server).text().trim()}`.toLowerCase(),\n                    url: decodedIframeData.url,\n                });\n            })));\n            return servers;\n        }\n        catch (err) {\n            throw new Error(err.message);\n        }\n    });\n    const fetchRecentMovies = () => __awaiter(this, void 0, void 0, function* () {\n        try {\n            const { data } = yield axios.get(`${baseUrl}/home`);\n            const $ = load(data);\n            const movies = $('section.block_area:contains(\"Latest Movies\") > div:nth-child(2) > div:nth-child(1) > div.flw-item')\n                .map((i, el) => {\n                var _a;\n                const releaseDate = $(el).find('div.film-detail > div.fd-infor > span:nth-child(1)').text();\n                const movie = {\n                    id: (_a = $(el).find('div.film-poster > a').attr('href')) === null || _a === void 0 ? void 0 : _a.slice(1),\n                    title: $(el).find('div.film-detail > h3.film-name > a').attr('title'),\n                    url: `${baseUrl}${$(el).find('div.film-poster > a').attr('href')}`,\n                    image: $(el).find('div.film-poster > img').attr('data-src'),\n                    releaseDate: isNaN(parseInt(releaseDate)) ? undefined : releaseDate,\n                    duration: $(el).find('div.film-detail > div.fd-infor > span.fdi-duration').text() || null,\n                    type: $(el).find('div.film-detail > div.fd-infor > span.float-right').text() === 'Movie'\n                        ? TvTypeEnum.MOVIE\n                        : TvTypeEnum.TVSERIES,\n                };\n                return movie;\n            })\n                .get();\n            return movies;\n        }\n        catch (err) {\n            throw new Error(err.message);\n        }\n    });\n    const fetchRecentTvShows = () => __awaiter(this, void 0, void 0, function* () {\n        try {\n            const { data } = yield axios.get(`${baseUrl}/home`);\n            const $ = load(data);\n            const tvshows = $('section.block_area:contains(\"Latest TV Shows\") > div:nth-child(2) > div:nth-child(1) > div.flw-item')\n                .map((i, el) => {\n                var _a;\n                const tvshow = {\n                    id: (_a = $(el).find('div.film-poster > a').attr('href')) === null || _a === void 0 ? void 0 : _a.slice(1),\n                    title: $(el).find('div.film-detail > h3.film-name > a').attr('title'),\n                    url: `${baseUrl}${$(el).find('div.film-poster > a').attr('href')}`,\n                    image: $(el).find('div.film-poster > img').attr('data-src'),\n                    season: $(el).find('div.film-detail > div.fd-infor > span:nth-child(1)').text().replace('SS', '').trim(),\n                    latestEpisode: $(el).find('div.film-detail > div.fd-infor > span:nth-child(3)').text().replace('EPS', '').trim() || null,\n                    type: $(el).find('div.film-detail > div.fd-infor > span.float-right').text() === 'Movie'\n                        ? TvTypeEnum.MOVIE\n                        : TvTypeEnum.TVSERIES,\n                };\n                return tvshow;\n            })\n                .get();\n            return tvshows;\n        }\n        catch (err) {\n            throw new Error(err.message);\n        }\n    });\n    const fetchTrendingMovies = () => __awaiter(this, void 0, void 0, function* () {\n        try {\n            const { data } = yield axios.get(`${baseUrl}/home`);\n            const $ = load(data);\n            const movies = $('div#trending-movies div.film_list-wrap div.flw-item')\n                .map((i, el) => {\n                var _a;\n                const releaseDate = $(el).find('div.film-detail > div.fd-infor > span:nth-child(1)').text();\n                const movie = {\n                    id: (_a = $(el).find('div.film-poster > a').attr('href')) === null || _a === void 0 ? void 0 : _a.slice(1),\n                    title: $(el).find('div.film-detail > h3.film-name > a').attr('title'),\n                    url: `${baseUrl}${$(el).find('div.film-poster > a').attr('href')}`,\n                    image: $(el).find('div.film-poster > img').attr('data-src'),\n                    releaseDate: isNaN(parseInt(releaseDate)) ? undefined : releaseDate,\n                    duration: $(el).find('div.film-detail > div.fd-infor > span.fdi-duration').text() || null,\n                    type: $(el).find('div.film-detail > div.fd-infor > span.float-right').text() === 'Movie'\n                        ? TvTypeEnum.MOVIE\n                        : TvTypeEnum.TVSERIES,\n                };\n                return movie;\n            })\n                .get();\n            return movies;\n        }\n        catch (err) {\n            throw new Error(err.message);\n        }\n    });\n    const fetchTrendingTvShows = () => __awaiter(this, void 0, void 0, function* () {\n        try {\n            const { data } = yield axios.get(`${baseUrl}/home`);\n            const $ = load(data);\n            const tvshows = $('div#trending-tv div.film_list-wrap div.flw-item')\n                .map((i, el) => {\n                var _a;\n                const tvshow = {\n                    id: (_a = $(el).find('div.film-poster > a').attr('href')) === null || _a === void 0 ? void 0 : _a.slice(1),\n                    title: $(el).find('div.film-detail > h3.film-name > a').attr('title'),\n                    url: `${baseUrl}${$(el).find('div.film-poster > a').attr('href')}`,\n                    image: $(el).find('div.film-poster > img').attr('data-src'),\n                    season: $(el).find('div.film-detail > div.fd-infor > span:nth-child(1)').text().replace('SS', '').trim(),\n                    latestEpisode: $(el).find('div.film-detail > div.fd-infor > span:nth-child(3)').text().replace('EPS', '').trim() || null,\n                    type: $(el).find('div.film-detail > div.fd-infor > span.float-right').text() === 'Movie'\n                        ? TvTypeEnum.MOVIE\n                        : TvTypeEnum.TVSERIES,\n                };\n                return tvshow;\n            })\n                .get();\n            return tvshows;\n        }\n        catch (err) {\n            throw new Error(err.message);\n        }\n    });\n    const fetchByCountry = (country_1, ...args_1) => __awaiter(this, [country_1, ...args_1], void 0, function* (country, page = 1) {\n        const result = {\n            currentPage: page,\n            hasNextPage: false,\n            results: [],\n        };\n        const navSelector = 'div.pre-pagination > nav:nth-child(1) > ul:nth-child(1)';\n        try {\n            const { data } = yield axios.get(`${baseUrl}/country/${country}/?page=${page}`);\n            const $ = load(data);\n            result.hasNextPage = $(navSelector).length > 0 ? !$(navSelector).children().last().hasClass('active') : false;\n            $('div.container > section.block_area > div.block_area-content > div.film_list-wrap > div.flw-item')\n                .each((i, el) => {\n                var _a, _b, _c, _d;\n                const resultItem = {\n                    id: (_b = (_a = $(el).find('div.film-poster > a').attr('href')) === null || _a === void 0 ? void 0 : _a.slice(1)) !== null && _b !== void 0 ? _b : '',\n                    title: (_c = $(el).find('div.film-detail > h2.film-name > a').attr('title')) !== null && _c !== void 0 ? _c : '',\n                    url: `${baseUrl}${$(el).find('div.film-poster > a').attr('href')}`,\n                    image: $(el).find('div.film-poster > img').attr('data-src'),\n                    type: $(el).find('div.film-detail > div.fd-infor > span.float-right').text() === 'Movie'\n                        ? TvTypeEnum.MOVIE\n                        : TvTypeEnum.TVSERIES,\n                };\n                const season = $(el)\n                    .find('div.film-detail > div.fd-infor > span:nth-child(1)')\n                    .text()\n                    .replace('SS', '')\n                    .trim();\n                const latestEpisode = (_d = $(el).find('div.film-detail > div.fd-infor > span:nth-child(3)').text().replace('EPS', '').trim()) !== null && _d !== void 0 ? _d : null;\n                if (resultItem.type === TvTypeEnum.TVSERIES) {\n                    resultItem.season = season;\n                    resultItem.latestEpisode = latestEpisode;\n                }\n                else {\n                    resultItem.releaseDate = season;\n                    resultItem.duration = latestEpisode;\n                }\n                result.results.push(resultItem);\n            })\n                .get();\n            return result;\n        }\n        catch (err) {\n            throw new Error(err.message);\n        }\n    });\n    const fetchByGenre = (genre_1, ...args_1) => __awaiter(this, [genre_1, ...args_1], void 0, function* (genre, page = 1) {\n        const result = {\n            currentPage: page,\n            hasNextPage: false,\n            results: [],\n        };\n        try {\n            const { data } = yield axios.get(`${baseUrl}/genre/${genre}?page=${page}`);\n            const $ = load(data);\n            const navSelector = 'div.pre-pagination > nav:nth-child(1) > ul:nth-child(1)';\n            result.hasNextPage = $(navSelector).length > 0 ? !$(navSelector).children().last().hasClass('active') : false;\n            $('.film_list-wrap > div.flw-item')\n                .each((i, el) => {\n                var _a, _b, _c, _d;\n                const resultItem = {\n                    id: (_b = (_a = $(el).find('div.film-poster > a').attr('href')) === null || _a === void 0 ? void 0 : _a.slice(1)) !== null && _b !== void 0 ? _b : '',\n                    title: (_c = $(el).find('div.film-detail > h2 > a').attr('title')) !== null && _c !== void 0 ? _c : '',\n                    url: `${baseUrl}${$(el).find('div.film-poster > a').attr('href')}`,\n                    image: $(el).find('div.film-poster > img').attr('data-src'),\n                    type: $(el).find('div.film-detail > div.fd-infor > span.float-right').text() === 'Movie'\n                        ? TvTypeEnum.MOVIE\n                        : TvTypeEnum.TVSERIES,\n                };\n                const season = $(el)\n                    .find('div.film-detail > div.fd-infor > span:nth-child(1)')\n                    .text()\n                    .replace('SS', '')\n                    .trim();\n                const latestEpisode = (_d = $(el).find('div.film-detail > div.fd-infor > span:nth-child(3)').text().replace('EPS', '').trim()) !== null && _d !== void 0 ? _d : null;\n                if (resultItem.type === TvTypeEnum.TVSERIES) {\n                    resultItem.season = season;\n                    resultItem.latestEpisode = latestEpisode;\n                }\n                else {\n                    resultItem.releaseDate = season;\n                    resultItem.duration = latestEpisode;\n                }\n                result.results.push(resultItem);\n            })\n                .get();\n            return result;\n        }\n        catch (err) {\n            throw new Error(err.message);\n        }\n    });\n    return Object.assign(Object.assign({}, config), { supportedTypes,\n        search,\n        fetchMediaInfo,\n        fetchEpisodeSources,\n        fetchEpisodeServers,\n        fetchRecentMovies,\n        fetchRecentTvShows,\n        fetchTrendingMovies,\n        fetchTrendingTvShows,\n        fetchByCountry,\n        fetchByGenre });\n}\n//# sourceMappingURL=create-yflix.js.map";

export default testCodeString;

// CommonJS compatibility
module.exports = { testCodeString };
